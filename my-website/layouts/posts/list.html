{{ define "main" }}

{{ $technical := where .Pages ".Params.categories" "intersect" (slice "technical") }}
{{ $personal := where .Pages ".Params.categories" "intersect" (slice "personal") }}

{{ if $technical }}
<section class="post-section">
  <h2>Technical</h2>
  <ul class="post-list">
    {{ range $technical }}
    <li>
      <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
      <a href="{{ .Permalink }}">{{ .Title }}</a>
    </li>
    {{ end }}
  </ul>
</section>
{{ end }}

{{ if $personal }}
<section class="post-section">
  <h2>Personal</h2>
  <ul class="post-list">
    {{ range $personal }}
    <li>
      <span class="post-date">{{ .Date.Format "2006-01-02" }}</span>
      <a href="{{ .Permalink }}">{{ .Title }}</a>
    </li>
    {{ end }}
  </ul>
</section>
{{ end }}

{{ end }}
